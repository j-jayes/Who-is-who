<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="paper_files/libs/clipboard/clipboard.min.js"></script>
<script src="paper_files/libs/quarto-html/quarto.js"></script>
<script src="paper_files/libs/quarto-html/popper.min.js"></script>
<script src="paper_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="paper_files/libs/quarto-html/anchor.min.js"></script>
<link href="paper_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="paper_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="paper_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="paper_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="paper_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="paper_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="paper_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="paper_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In the quest to understand the dynamics of economic development and technological advancement, previous research by this author and his supervisors shed light on the transformative impact of early electricity access in Sweden. “Power for progress: The impact of electricity on individual labor market outcomes” <span class="citation" data-cites="jayes_power_2024">[@jayes_power_2024]</span> revealed how the advent of electricity in certain parishes led to positive economic outcomes: a boost in income levels, reduced inequality, and the maintenance of employment levels despite the advent of labor-saving technology. A particularly striking observation was the tendency of workers in these early electrified parishes to remain in their birthplaces, hinting at a newfound economic vibrancy stemming from the technological spillovers.</p>
<p>Building on these insights, the present paper delves deeper into the human aspect of this technological revolution. It poses a critical question: Who were the key figures driving this change? Were they local talents nurtured by the opportunities at hand, or did they represent a wave of skilled individuals drawn from afar, lured by the pioneering spirit of these early electrified areas?</p>
<p>To answer this, the investigation leverages two novel and rich data sources. The first, “Vem är Vem”, is a comprehensive set of biographical dictionaries containing the profiles of 75,000 notable Swedes active between 1945 and 1968. The second, the “Svensk Industrikalender” or Swedish Industrial Calendar of 1947, offers an exhaustive catalogue of industrial firms, detailing their activities, workforce, and financial metrics.</p>
<p>I digitize and structure these sources in order to analyze the changing patterns of the Swedish labour market in the middle of the 20th century in light of electrification. Our findings challenge our prior expectations. Contrary to the belief that local talent pools predominantly fueled the technological boom, I observe a pattern of geographical mobility among the highly educated and skilled professionals in electricity-related fields. These individuals, pivotal to overseeing and advancing the electricity sector, often sought education and opportunities far from their origins. This suggests a bifurcated labor market: local talent predominantly filled the burgeoning middle-skilled roles within the electricity sector, while the top-tier skilled professionals were more transient, moving towards educational and occupational opportunities. This paper explores the implications of this labor market structure for the economic development patterns witnessed during Sweden’s second Industrial Revolution.</p>
<p>These findings, tentative as they are, have real world value. As we seek to understand what drove the dynamism during the age of electrification in Sweden, we are better equipped to shape policy today that seeks to revitalize deindustrializing areas across the developed world and help the developing world harness new technologies for sustainable growth. In addition, the methodologies employed to structure and analyze archival data can provide a template for future research using similar materials. [fix up]</p>
<p>The paper is laid out as follows: the current research question is placed in context, the sources are explained, followed by their digitization and structuring process. I then lay out some descriptive statistics and tentative findings regarding the patterns of movement for the high skilled electricity related workers, compared with other professionals I observe in the biographical dictionaries.</p>
</section>
<section id="related-literature" class="level2">
<h2 class="anchored" data-anchor-id="related-literature">Related Literature</h2>
<p>The question of where the high skilled workers in electricity related occupations in Sweden came from is important in order to understand the economic dynamism of that era. As such, it ties into a wealth of research on technological change and the labour market, which I review briefly here.</p>
<p>The historical adaptability of labor markets to technological change is well-documented. In their study of the U.S. labor market’s response to the automation of telephone operation, Feigenbaum and Gross <span class="citation" data-cites="Feigenbaum2020">@Feigenbaum2020</span> demonstrate how technological displacement in one sector led to increased demand in others, suggesting an inherent resilience in labor markets. This finding is particularly pertinent to our exploration of Sweden’s electrification, as it indicates a potential for both displacement and opportunity in the face of technological change.</p>
<p>Goldin’s extensive analysis of labor markets in the 20th century provides a comprehensive backdrop to our study <span class="citation" data-cites="Goldin1994 Goldin1998">[-@Goldin1994; -@Goldin1998]</span>. Her work highlights critical shifts in labor participation, wage structures, and job security, reflecting the complex interplay between societal changes and labor market dynamics. These insights are crucial for understanding how shifts in human capital, like those during Sweden’s electrification period, contribute to broader economic outcomes.</p>
<p>The impact of the Digital Revolution on labor markets, as reviewed in the Oxford Review of Economic Policy, is also salient to our study <span class="citation" data-cites="Adams2018 Goos2018">[@Adams2018; @Goos2018]</span>. These articles underscore the emergence of job polarization and the crucial role of policy interventions in ensuring equitable benefits from technological advancements. This perspective is instrumental in understanding the differential impacts of electrification in Sweden, especially in terms of job creation and labor market segmentation.</p>
<p>Moretti’s exploration of the geographical clustering of talent and innovation in “The New Geography of Jobs” provides a crucial perspective on the spatial dynamics of economic development <span class="citation" data-cites="Moretti2012">[@Moretti2012]</span>. His findings about the importance of local ecosystems in fostering innovation and economic vitality resonate with our investigation of how early electrification in Swedish parishes influenced the distribution and impact of skilled labor. His concern, that gains to productivity are eaten up by increased cost of living (primarily though housing costs) when constraints prevail, is not evidenced in the first half of the 20th century in Sweden. However, his example of Silicon Valley – where high productivity and attractive jobs draw in people with high levels of skill, raising property prices - is becoming more concerning in today’s relatively housing scarce urban centers.</p>
<p>New technologies require new skills. Mokyr’s research provides insights into the importance of both artisans and engineers in the progression of the Industrial Revolution. His studies underscore the synergistic relationship between theoretical knowledge and practical expertise, essential in driving technological innovation and economic progress <span class="citation" data-cites="Mokyr2017">[@Mokyr2017]</span>. In his examination of the socio-economic elites of early modern Europe, Mokyr explains how their education and exposure to new ideas and sciences were pivotal in fostering various intellectual and technological advancements. This educated elite, through their changing culture and institutions, played a crucial role in creating an environment conducive to innovation <span class="citation" data-cites="Mokyr2017Journal">[@Mokyr2017Journal]</span>.</p>
<p>Not every innovator needs higher education. Mokyr’s perspective is crucial in understanding the dynamics of technological development and economic growth, emphasizing the collaborative efforts between well-educated scientists and highly skilled artisans. This interplay highlights the importance of practical skills, theoretical knowledge, and their combined impact on technological progress. For example, figures like metallurgist Henry Cort, who collaborated with scientists despite lacking formal scientific training, exemplify the productive synergy between different forms of expertise in this era <span class="citation" data-cites="Mokyr2017Journal">[@Mokyr2017Journal]</span>.</p>
<p>In this paper, I want to find out where the individuals came from who enabled the technological development that was associated with Sweden becoming richer and more equal. Did they come from the areas around where the technology was developed / adopted, learning skills on the job? Or did they get formal education at one of Sweden’s universities and then bring these skills to the hubs of technology? Should we praise the people, or the place?</p>
</section>
<section id="source-material" class="level2">
<h2 class="anchored" data-anchor-id="source-material">Source material</h2>
<section id="biographical-dictionaries" class="level3">
<h3 class="anchored" data-anchor-id="biographical-dictionaries">Biographical dictionaries</h3>
<p>“Vem är Vem?” is a biographical dictionary, comprising a rich repository of information about notable individuals in Sweden. Published in two regional editions with a total of five volumes each, the first edition spanned from 1945 to 1950, and the second from 1962 to 1968, by the Bokförlaget Vem är Vem publishing house. An additional volume specifically focussed on individuals in industry and business was produced in 1945. This encyclopedia offers an invaluable snapshot of Swedish societal and professional landscapes during these pivotal periods. [fix citation]</p>
<p>The primary intention behind the creation of “Vem är Vem?” was to spotlight individuals who were at the peak of their careers, regardless of their age. This focus extends beyond traditional measures of influence, emphasizing the importance of those in influential positions or notable roles across relatively diverse sectors. As such, it serves as a crucial resource for understanding the professional and personal trajectories of around 75,000 individuals who shaped Swedish society in the mid-20th century.</p>
<p>It is worth noting that the criteria for inclusion was somewhat vague, and individuals could opt in to being included for a nominal fee. As a result, there are some individuals for whom not much information is included beyond biographic information, current location and profession. For others, there is a rich tapestry about their lives including records of career progression, business travel, technical writings and membership of civic organizations. The source does not capture a representative picture of Swedish society at the time, but rather those individuals with some level of social cachet or prestige, and a desire to be recorded in the biographical dictionaries as such.</p>
<p>“Vem är Vem?” is useful to economic historians thanks to its high quality digitization, with nine out of the 11 total volumes being made accessible online by librarians in Uppsala through <em>Projekt Runeberg</em>, as shown in <a href="#fig-who-is-who-books">Figure&nbsp;1</a>. This digitization has facilitated research, allowing for a broader exploration of the biographies and career paths of thousands of individuals. The encyclopedia’s extensive coverage makes it a goldmine for researchers, historians, and anyone interested in the socio-economic history of Sweden during a period marked by significant change and development.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"assets/who-is-who-volumes.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-who-is-who-books" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/who-is-who-volumes.png" class="img-fluid figure-img" style="width:5in"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Number of biographies in each volume of ‘Vem är Vem?’</figcaption>
</figure>
</div>
</div>
</div>
<p>In the context of economic and historical research, “Vem är Vem?” serves as a unique tool. By providing detailed biographies and career information, it allows for an in-depth analysis of the human capital that contributed to Sweden’s economic and social evolution during the mid-20th century.</p>
<p><img src="assets/vem_page.png" class="img-fluid"></p>
<p>The biographic information about the individuals in the dictionaries are exemplified in <a href="#fig-who-is-who-page">Figure&nbsp;2</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"assets/vem_page.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-who-is-who-page" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/vem_page.png" class="img-fluid figure-img" width="408"></p>
<figcaption class="figure-caption">Figure&nbsp;2: A representative page of Vem är Vem?, highlighting the biography of Karl Gustaf Lund</figcaption>
</figure>
</div>
</div>
</div>
<ol type="1">
<li><p><strong>Education</strong>: Lund’s education at prestigious institutions such as the Royal Institute of Technology (KTH) indicates he had access to advanced technical knowledge. This level of education is critical for understanding the specialized skills that were necessary for innovation and advancement in electricity-related industries.</p></li>
<li><p><strong>Career Progression</strong>: The text outlines Lund’s career progression through various roles in metallurgy and chemical engineering. This trajectory can illustrate how individuals applied their education in practice, contributing to industrial development. Tracking such careers can provide insight into the professional development paths that were common and valued in the sector at the time.</p></li>
<li><p><strong>International Experience</strong>: His experiences in the United States reflect the cross-border exchange of knowledge and skills. This can show how international experiences contributed to the domestic industry by importing new ideas and practices, which is a key aspect of human capital development.</p></li>
<li><p><strong>Leadership and Management</strong>: Lund’s leadership positions, such as chairmanships and advisory roles, imply a combination of technical expertise and managerial acumen. The ability to lead and innovate within companies is a significant aspect of human capital that drives industry growth.</p></li>
<li><p><strong>Research and Innovation</strong>: The reference to his translated research work indicates an engagement with cutting-edge technology and knowledge creation. Such contributions are the tangible outputs of human capital in action, pushing the industry forward through innovation.</p></li>
<li><p><strong>Professional Networks</strong>: His involvement with societies and associations suggests a networked professional community, which is essential for the diffusion of innovative ideas and practices. These networks are often where knowledge is exchanged, partnerships are formed, and collaborations are initiated.</p></li>
</ol>
</section>
<section id="industrial-catalogue" class="level3">
<h3 class="anchored" data-anchor-id="industrial-catalogue">Industrial Catalogue</h3>
<p>The Svensk Industrikalender from 1947, published by Sveriges Industriförbund (Sweden’s Industrial Association), is a comprehensive directory of Swedish industrial firms. This calendar was issued annually from 1918 to 2000 and contains information related to Swedish industry. The 1947 edition available on the Project Runeberg website was digitized in April 2012, sourced from the Centrum för Näringslivshistoria. The calendar is believed to be under catalog protection but not copyright.</p>
<p>It includes detailed information such as company names, locations, nature of businesses, products, contact details, share capital, number of employees, production values, establishment years, and key personnel including managing directors and board members. This source is valuable for studying the economic and industrial environment of post-war Sweden, providing insights into corporate structures, industry distribution, and business trends of that period.</p>
<p><img src="assets/svensk-industrikalender_1.png" class="img-fluid"></p>
<p>The common fields listed for each company entry in the catalogue are as follows:</p>
<ol type="1">
<li><p><strong>Company Name</strong>: The name of the company is listed at the beginning of each entry, usually in bold or with an asterisk, indicating membership of Sveriges Industriförbundet.</p></li>
<li><p><strong>Location/Town</strong>: The town or location of the company, which in this case is <code>Arboga</code>.</p></li>
<li><p><strong>Description of Business</strong>: A brief description of the company’s main activities or products is provided.</p></li>
<li><p><strong>Products or Services Offered</strong>: Specific items or services the company provides, such as types of machinery, tools, or materials.</p></li>
<li><p><strong>Contact Information</strong>: This typically includes:</p>
<ul>
<li><strong>Telegraph Address</strong>: Listed as “Telegr.-adr.” indicating the address to which telegraphs are to be sent.</li>
<li><strong>Telephone Number</strong>: Listed as “Telefon” followed by the number.</li>
<li><strong>Postal Code</strong>: Mentioned as “Postgiro” or “Postiro” with corresponding numbers.</li>
<li><strong>Bank Account</strong>: Sometimes a bank account number or similar financial information is included.</li>
</ul></li>
<li><p><strong>Management and Key Personnel</strong>: Names and titles of important figures in the company, such as the director (<code>Verkst. dir.</code>), board members, or founders.</p></li>
<li><p><strong>Financial Information</strong>: Information about the financial aspect of the company, such as capital invested (<code>Akt.-kap.</code>) or turnover (<code>Tillv.-värde</code>).</p></li>
<li><p><strong>Establishment Details</strong>: This includes the year of establishment and sometimes the history or lineage of the company’s ownership or major changes.</p></li>
<li><p><strong>Address</strong>: The full postal address, which may include a street name or a postbox number, indicated as “Postgiro”.</p></li>
</ol>
<p>This type of catalogue was commonly used for business-to-business interactions and could be considered an early form of networking resource, allowing companies to find suppliers, customers, and partners.</p>
</section>
</section>
<section id="data-collection-strategy" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-strategy">Data collection strategy</h2>
<p>In order to analyze both the biographical dictionaries and industrial catalogue, we need to bend the text into a machine readable structure. This process is relatively complicated. It involves breaking each component of the source up (e.g.&nbsp;each biography or company record), extracting the pertinent information from each record, storing each value with its associated key, and then saving this information in a way that is easy to analyze and aggregate.</p>
<p>Prior to the advent of Large Language Models (LLMs), this was a task that required a large number of human hours to complete.</p>
<p>[complete explanation]</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph TD
    A[Start] --&gt; B[Download Images]
    B --&gt; C[Send Images to Azure OCR]
    C --&gt; D[Receive JSON Files]
    D --&gt; E[Analyze JSON for Geographic Clusters]
    E --&gt; F[Identify Technology Clusters]
    F --&gt; G[End]

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="clustering-of-firms-and-classification-of-occupations" class="level2">
<h2 class="anchored" data-anchor-id="clustering-of-firms-and-classification-of-occupations">Clustering of firms and classification of occupations</h2>
<p>[explain how I cluster firms with text embeddings based on business and products]</p>
<p>[explain how I ]</p>
</section>
<section id="what-does-the-industrial-calendar-tell-us-about-industrial-firms-in-sweden-in-1947" class="level2">
<h2 class="anchored" data-anchor-id="what-does-the-industrial-calendar-tell-us-about-industrial-firms-in-sweden-in-1947">What does the industrial calendar tell us about industrial firms in Sweden in 1947?</h2>
<p><img src="assets/geom_density_ridges.png" class="img-fluid"></p>
<p><img src="assets/map_most_common_businesses.png" class="img-fluid"></p>
<p><img src="assets/map_of_electricity_related_businesses.png" class="img-fluid"></p>
<p><img src="assets/capital_vs_employees.png" class="img-fluid"></p>
</section>
<section id="what-can-we-learn-from-the-who-is-who-biographies" class="level2">
<h2 class="anchored" data-anchor-id="what-can-we-learn-from-the-who-is-who-biographies">What can we learn from the Who is Who? biographies?</h2>
<p><img src="assets/hisco_counts.png" class="img-fluid"></p>
<p><img src="assets/eee_map.png" class="img-fluid"></p>
<p><img src="assets/distances_comparison.png" class="img-fluid"></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>